{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _styled from \"@emotion/styled-base\";\nvar __jsx = React.createElement;\nimport React, { Component } from 'react';\nimport _ from 'lodash';\nimport moment from 'moment';\nimport PresenceCase from '../presenceCase.component';\nimport { uuidv4 } from '../../../../src/utils';\nmoment.locale('fr');\n\nconst Container = _styled(\"div\", {\n  target: \"eh2gib20\",\n  label: \"Container\"\n})({\n  name: \"1fw2sel\",\n  styles: \"display:grid;overflow:auto;height:500px;width:700px;\"\n});\n\nconst Grid = _styled(\"div\", {\n  target: \"eh2gib21\",\n  label: \"Grid\"\n})({\n  name: \"4knjz3\",\n  styles: \"display:flex;flex-wrap:nowrap;\"\n});\n\nconst LittleCol = _styled(\"div\", {\n  target: \"eh2gib22\",\n  label: \"LittleCol\"\n})({\n  name: \"1x68ryb\",\n  styles: \"width:100px;min-width:100px;\"\n});\n\nconst ItemHeader = _styled(\"div\", {\n  target: \"eh2gib23\",\n  label: \"ItemHeader\"\n})({\n  name: \"95j005\",\n  styles: \"height:50px;min-height:50px;position:sticky;position:-webkit-sticky;background:white;top:0;\"\n});\n\nconst ColFixedLeft = _styled(\"div\", {\n  target: \"eh2gib24\",\n  label: \"ColFixedLeft\"\n})({\n  name: \"1127zhp\",\n  styles: \"position:sticky;left:0;z-index:9998;background:white;width:250px;min-width:250px;\"\n});\n\nconst Item = _styled(\"div\", {\n  target: \"eh2gib25\",\n  label: \"Item\"\n})({\n  name: \"5lsvks\",\n  styles: \"height:50px;padding:0.4rem;\"\n});\n\nexport class PresenceTable extends Component {\n  constructor(...args) {\n    var _this;\n\n    super(...args);\n    _this = this;\n\n    _defineProperty(this, \"handleAddDate\", function () {\n      const {\n        addDate,\n        dates\n      } = _this.props;\n      const date = moment(dates[dates.length - 1].from, 'YYYY.MM.DD').add(1, 'weeks');\n      addDate({\n        _id: uuidv4(),\n        from: date.format('YYYY.MM.DD'),\n        to: date.clone().add(4, 'days').format('YYYY.MM.DD'),\n        timestamp: date.clone().add(4, 'days').unix(),\n        classes: ['']\n      });\n    });\n  }\n\n  componentDidMount() {\n    const {\n      fetchClasses,\n      fetchDates\n    } = this.props;\n    this.stopFetchingClasses = fetchClasses();\n    this.stopFetchingDates = fetchDates();\n  }\n\n  componentWillUnmount() {\n    this.stopFetchingClasses();\n    this.stopFetchingDates();\n  }\n\n  render() {\n    const {\n      classes,\n      dates,\n      editDate\n    } = this.props;\n\n    const classesSorted = _.sortBy(classes, ['name']);\n\n    const datesSorted = _.sortBy(dates, ['timestamp']);\n\n    return __jsx(\"div\", {\n      className: \"pa4\"\n    }, __jsx(Container, null, __jsx(Grid, null, __jsx(ColFixedLeft, null, __jsx(ItemHeader, {\n      className: \"b--black-20 bb f5 black bg-animate items-center pa3 center fw6\"\n    }, __jsx(\"span\", null, \"Semaine\")), datesSorted.map(function (date) {\n      return __jsx(Item, {\n        key: date._id,\n        className: \"b--black-20 bb f5 black bg-animate items-center pa3 center\"\n      }, __jsx(\"span\", null, \"Du\\xA0\", moment(date.from, 'YYYY.MM.DD').format('dddd D MMMM'), __jsx(\"br\", null), \"Au\\xA0\", moment(date.to, 'YYYY.MM.DD').format('dddd D MMMM')));\n    })), classesSorted.map(function (classe) {\n      return __jsx(LittleCol, {\n        key: classe._id\n      }, __jsx(ItemHeader, {\n        className: \"tc pa3 bb b--black-20 fw6\"\n      }, __jsx(\"span\", null, classe.name)), datesSorted.map(function (date) {\n        return __jsx(PresenceCase, {\n          editDate: editDate,\n          date: date,\n          presence: date.classes.includes(classe._id),\n          classeId: classe._id,\n          key: date._id + classe._id\n        });\n      }));\n    }), __jsx(\"button\", {\n      onClick: this.handleAddDate\n    }, \"+\"))));\n  }\n\n}","map":null,"metadata":{},"sourceType":"module"}