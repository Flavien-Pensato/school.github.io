{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.signIn = signIn;\nexports.signOut = signOut;\nexports.autoLogin = exports.logout = exports.login = void 0;\n\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\n\nvar _firebase = _interopRequireDefault(require(\"../../config/firebase\"));\n\nvar _account = require(\"./account.constants\");\n\nvar _display = require(\"../display/display.actions\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar login = function login(user) {\n  return {\n    type: _account.SIGNIN,\n    user: _lodash.default.pick(user, ['email', 'uid', 'refreshToken'])\n  };\n};\n\nexports.login = login;\n\nvar logout = function logout() {\n  return {\n    type: _account.SIGNOUT,\n    user: null\n  };\n};\n\nexports.logout = logout;\n\nvar autoLogin = function autoLogin() {\n  return function (dispatch) {\n    var stopObserver = _firebase.default.auth().onAuthStateChanged(function (user) {\n      if (user) {\n        dispatch(login(user));\n      }\n\n      dispatch((0, _display.showToaster)('La connexion automatique à fini'));\n      dispatch({\n        type: _account.AUTO_LOGIN_DONE\n      });\n      stopObserver();\n    });\n  };\n};\n\nexports.autoLogin = autoLogin;\n\nfunction signIn(email, password) {\n  return function (dispatch) {\n    _firebase.default.auth().signInWithEmailAndPassword(email, password).then(function (user) {\n      dispatch(login(user));\n      dispatch((0, _display.showToaster)('Connexion reussi'));\n    });\n  };\n}\n\nfunction signOut() {\n  return function (dispatch) {\n    _firebase.default.auth().signOut().then(function (error) {\n      if (!error) {\n        dispatch(logout());\n        dispatch((0, _display.showToaster)('Déconnection réussi'));\n      }\n    });\n  };\n}","map":null,"metadata":{},"sourceType":"script"}