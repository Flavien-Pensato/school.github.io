{"ast":null,"code":"import _ from 'lodash';\nimport firebase from '../../config/firebase';\nimport { SIGNIN, SIGNOUT, AUTO_LOGIN_DONE } from './account.constants';\nimport { showToaster } from '../display/display.actions';\nexport const login = function (user) {\n  return {\n    type: SIGNIN,\n    user: _.pick(user, ['email', 'uid', 'refreshToken'])\n  };\n};\nexport const logout = function () {\n  return {\n    type: SIGNOUT,\n    user: null\n  };\n};\nexport const autoLogin = function () {\n  return function (dispatch) {\n    const stopObserver = firebase.auth().onAuthStateChanged(function (user) {\n      if (user) {\n        dispatch(login(user));\n      }\n\n      dispatch(showToaster('La connexion automatique à fini'));\n      dispatch({\n        type: AUTO_LOGIN_DONE\n      });\n      stopObserver();\n    });\n  };\n};\nexport function signIn(email, password) {\n  return function (dispatch) {\n    firebase.auth().signInWithEmailAndPassword(email, password).then(function (user) {\n      dispatch(login(user));\n      dispatch(showToaster('Connexion reussi'));\n    });\n  };\n}\nexport function signOut() {\n  return function (dispatch) {\n    firebase.auth().signOut().then(function (error) {\n      if (!error) {\n        dispatch(logout());\n        dispatch(showToaster('Déconnection réussi'));\n      }\n    });\n  };\n}","map":null,"metadata":{},"sourceType":"module"}